#!SHEBANG_PY

# inspired by IDLE.app/Contents/IDLE

import sys
import os.path

SSL_CERT_DIR = sys.prefix + "/lib/python3.7/site-packages/certifi"
os.environ["SSL_CERT_DIR"] = SSL_CERT_DIR
os.environ["SSL_CERT_DIR"] = SSL_CERT_DIR + "/cacert.pem"

for key in ["TCL_LIBRARY", "TK_LIBRARY"]:
	if key in os.environ:
		del os.environ[key]
	
#import thonny
#thonny.launch()

execdir = os.path.dirname(sys.argv[0])
executable = os.path.join(execdir, "Python")
resdir = os.path.join(os.path.dirname(execdir), "Resources")
#libdir = os.path.join(os.path.dirname(execdir), "Frameworks")
mainprogram = os.path.join(resdir, "thonnymain.py")

sys.argv.insert(1, mainprogram)

pypath = os.getenv("PYTHONPATH", "")
if pypath:
    pypath = ":" + pypath
os.environ["PYTHONPATH"] = resdir + pypath

os.environ["PYTHONEXECUTABLE"] = executable
#os.environ["DYLD_LIBRARY_PATH"] = libdir
#os.environ["DYLD_FRAMEWORK_PATH"] = libdir
os.execve(executable, sys.argv, os.environ)
